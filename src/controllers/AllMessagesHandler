// var amqp = require('amqplib/callback_api');
// var mongodb = require('./../../config/mongo.db');
// var Event = require('./../../model/event.model');
//
// var allQueues = [
//   "shoppingcart_queue",
//   "inventory_queue"
// ]
// //
// exports.listen = function () {
//   amqp.connect('amqp://admin:Welkom1@128.199.61.247', function (error, connection) {
//     if(error){
//       console.log(error);
//     }
//
//     connection.createChannel()
//
//     // connection.on('ready', function () {
//     //   console.log('ready');
//     //
//     //   allQueues.forEach(function (queue) {
//     //     console.log('ready '+ queue);
//     //     connection.queue(queue, function (q) {
//     //       // Catch all messages
//     //       q.bind('#');
//     //
//     //       // Receive messages
//     //       q.subscribe(function (message) {
//     //         // Print messages to stdout
//     //         var today = new Date();
//     //         var date = today.getFullYear()+'-'+(today.getMonth()+1)+'-'+today.getDate();
//     //         var time = today.getHours() + ":" + today.getMinutes() + ":" + today.getSeconds();
//     //         var dateTime = date+' '+time;
//     //
//     //         var eventObject = {
//     //           event: message,
//     //           date: dateTime
//     //         }
//     //
//     //         Event.create(eventObject)
//     //           .then((event) => {
//     //             console.log(event)
//     //           })
//     //       });
//     //     });
//     //   })
//     // });
//
//   })
// }
// //
// // amqp.connect('amqp://admin:Welkom1@128.199.61.247', function (error, connection) {
// //   // Wait for connection to become established.
// //
// //   // add this for better debuging
// //   connection.on('error', function(e) {
// //     console.log("Error from amqp: ", e);
// //   });
// // })